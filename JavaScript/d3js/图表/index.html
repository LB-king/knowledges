<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>图表绘制</title>
    <script src="../static/d3.min.js"></script>
    <style>
      svg rect {
        fill: #bfc;
      }

      svg text {
        fill: blue;
        font: 12px sans-serif;
        text-anchor: end;
      }
    </style>
  </head>
  <body>
    <script>
      // 交换2变量的值
      /*  let [a, b] = [111, 222]
      a = [b, (b = a)][0]
      console.log(a)
      console.log(b) */
      let data = [10, 5, 12, 15]
      let [width, scaleFactor, barHeight] = [300, 20, 30]
      let graph = d3
        .select('body')
        .append('svg')
        .attr('width', width)
        .attr('height', barHeight * data.length)
      let bar = graph
        .selectAll('g')
        .data(data)
        .enter()
        .append('g')
        .attr('transform', function(d, i) {
          return `translate(0 ${i * barHeight})`
        })
      bar
        .append('rect')
        .attr('width', function(d) {
          return d * scaleFactor
        })
        .attr('height', barHeight - 5)
      bar
        .append('text')
        .attr('x', function(d) {
          return d * scaleFactor - 10
        })
        .attr('y', barHeight / 2 - 2)
        .attr('dy', '.35em')
        .text(function(d) {
          return d
        })
    </script>
  </body>
</html>
